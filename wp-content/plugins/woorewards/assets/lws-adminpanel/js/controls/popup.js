(function($){$.widget("lws.lws_popup",{options:{remove:false},_create:function(){this.element.on("click",".lws-popup-close",this._bind(this._closePopup,this));this.element.on("click",".lws-popup-button.cancel",this._bind(this._closePopup,this));const layouts=["all","grid","onebyone","threebythree"];this.mode=this.element.data("layout");if(!layouts.includes(this.mode))this.mode="all";this.next=this.element.find(".content-down");this.previous=this.element.find(".content-up");this.itemsContainer=this.element.find(".lws-popup-items");if(this.mode=="onebyone"||this.mode=="threebythree"){this.rows=this.element.data("rows");if(undefined==this.rows)this.rows=this.mode=="threebythree"?3:1;if(this.next.length){this.next.on("click",this._bind(this._nextPage,this));this.next.removeClass("hidden")}if(this.previous.length){this.previous.on("click",this._bind(this._previousPage,this));this.previous.removeClass("hidden")}this._updateDisplay()}},_bind:function(fn,me){return function(){return fn.apply(me,arguments)}},_closePopup:function(){if(this.options.remove==true){this.element.remove()}else{this.element.hide()}},_updateDisplay:function(){var items=this.itemsContainer.find(".lws-popup-item");if(!items.length)return;var current=items.filter(".lws-popup-current");if(!current.length)current=items.first().addClass("lws-popup-current");if(this.previous.length){this.previous.toggleClass("disabled",!current.prev(".lws-popup-item").length)}items.hide();current.show();if("threebythree"==this.mode){for(var i=1;i<this.rows;i++){current=current.next(".lws-popup-item");if(current.length)current.show();else break}}if(this.next.length){this.next.toggleClass("disabled",!(current.length&&current.next(".lws-popup-item").length))}},_previousPage:function(){var current=this.itemsContainer.find(".lws-popup-item.lws-popup-current");if(current.length){current.removeClass("lws-popup-current");current.prev(".lws-popup-item").addClass("lws-popup-current")}this._updateDisplay()},_nextPage:function(){var current=this.itemsContainer.find(".lws-popup-item.lws-popup-current");if(current.length){let next=current;for(var i=1;i<this.rows&&next.next(".lws-popup-item").length;i++){next=next.next(".lws-popup-item")}if(next.next(".lws-popup-item").length){current.removeClass("lws-popup-current");current.next(".lws-popup-item").addClass("lws-popup-current")}}this._updateDisplay()}})})(jQuery);jQuery(function($){$(".lws_popup").lws_popup()});
